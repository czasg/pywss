---
title: å¿«é€Ÿä¸Šæ‰‹
hide_title: true
hide_table_of_contents: false
slug: /start
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## å®‰è£…
Pywss ä¾èµ– python 3.6+ ç‰ˆæœ¬çš„éƒ¨åˆ†ç‰¹æ€§ã€‚

å¦‚æœä½ åˆšå¥½ä½¿ç”¨çš„æ˜¯ 3.6 åŠä»¥ä¸Šç‰ˆæœ¬çš„è¯ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å¯ä»¥é€šè¿‡`pip`å®ç°å¿«é€Ÿå®‰è£…ã€‚

<Tabs className="unique-tabs">
<TabItem value="pipå®‰è£…" label="pipå®‰è£…" default>

```shell script
pip3 install pywss
```

</TabItem>
<TabItem value="æºç å®‰è£…" label="æºç å®‰è£…" default>

```shell script
python setup.py install
```

</TabItem>
</Tabs>

Pywss ç›®å‰ä»…ä¾èµ–ä¸€ä¸ªæ—¥å¿—åº“ [loggus](https://github.com/czasg/loggus)ï¼Œè¯¥åº“æ˜¯ä½œè€…å¯¹ç»“æ„åŒ–æ—¥å¿—åº“çš„æ¢ç´¢æˆæœï¼Œæš‚æ—¶å¤Ÿç”¨ğŸ˜…ã€‚

åç»­ä¼šè€ƒè™‘åˆ‡å›åŸç”Ÿæ—¥å¿—åº“ loggingï¼Œå‡å°‘å¿ƒæ™ºè´Ÿæ‹…ğŸ˜…ã€‚


## åˆ›å»ºåº”ç”¨
æœ¬èŠ‚ç»§ç»­ä»¥ hello world ä¸ºä¾‹ï¼Œä»é›¶å¼€å§‹å¿«é€Ÿé€Ÿæ­å»ºä¸€ä¸ª web åº”ç”¨ã€‚

é¦–å…ˆï¼Œåœ¨æœ¬åœ°åˆ›å»º **main.py** æ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹æºç ã€‚

<Tabs className="unique-tabs">
  <TabItem value="main.py" label="main.py" default>

```python showLineNumbers title="åº”ç”¨æºç "
import pywss

def helloHandler(ctx: pywss.Context):
  ctx.write({"hello": "world"})

def main(defaultPort = 8080):
    app = pywss.App()
    app.get("/hi", lambda ctx: ctx.write("hi~"))  # æ”¯æŒåŒ¿åå‡½æ•°
    app.post("/hello", helloHandler)
    app.run(port=defaultPort)

if __name__ == '__main__':
    """
    python3 main.py å¯åŠ¨æœåŠ¡
    """
    main()
```

  </TabItem>
  <TabItem value="GET/hi" label="GET/hi">

```shell script title="è¯·æ±‚ /hi æ¥å£"
>>> curl localhost:8080/hi
hi~
```

  </TabItem>
  <TabItem value="POST/hello" label="POST/hello">

```shell script title="è¯·æ±‚ /hello æ¥å£"
>>> curl -X POST localhost:8080/hello
{"hello": "world"}
```

  </TabItem>
</Tabs>

æˆ‘ä»¬æ¥ç®€å•è§£è¯»ä¸‹`main.py`æºç ï¼Œé¦–å…ˆæ˜¯åœ¨ç¬¬7è¡Œåˆå§‹åŒ–äº†ä¸€ä¸ª`app`ï¼Œå¹¶åœ¨ç¬¬10è¡Œæ‰§è¡Œ`app.run`å¯åŠ¨ web åº”ç”¨ã€‚
è¿™ä¸¤è¡Œä»£ç ï¼Œå›Šæ‹¬äº† app ä»åˆå§‹åŒ–åˆ°å¯åŠ¨çš„æ•´ä¸ªå‘¨æœŸã€‚

å…¶æ¬¡æ˜¯ä¸­é—´çš„ä¸šåŠ¡æ¨¡å—ã€‚

æœ€ç‰¹æ®Šçš„å°±æ˜¯ç¬¬8ã€9è¡Œçš„æ³¨å†Œè·¯ç”±æ–¹æ³•ï¼š
- `app.get(/hi, ...` è¡¨ç¤ºæ³¨å†Œ **Http Get** æ–¹æ³•ï¼Œå¹¶æŒ‡å®šè·¯ç”± `/hi`ã€‚
- `app.post(/hello, ...` è¡¨ç¤ºæ³¨å†Œ **Http Post** æ–¹æ³•ï¼Œå¹¶æŒ‡å®šè·¯ç”± `/hello`ã€‚

æœåŠ¡å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ curl æ¥éªŒè¯æœåŠ¡ã€‚ç»“æœè§ä¸Šã€‚

è‡³æ­¤ï¼Œä¸€ä¸ªç®€å•çš„ hello world åº”ç”¨å°±æ­å»ºå®Œæˆäº†ã€‚



## **Context** ä¸Šä¸‹æ–‡
åœ¨ Pywss ä¸­ï¼Œ**`pywss.Context`**ï¼ˆåæ–‡å‡ä½¿ç”¨ ctx ä»£æ›¿ï¼‰ è´¯ç©¿äºå•æ¬¡è¯·æ±‚çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ˜¯ Pywss ç”¨äºç®¡ç†è¯·æ±‚çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚

è€Œå¯¹äº Pywss çš„ **Handler**ï¼ˆä¸šåŠ¡é€»è¾‘å¤„ç†æ¨¡å—ï¼‰ æ¥è¯´ï¼Œä»…ä¸”æ”¯æŒ **ctx** è¿™ä¸€ä¸ªå‚æ•°ã€‚

æ‰€ä»¥ï¼Œ**ctx** æ˜¯ä¸€ä¸ªåŒ…å«äº† **HTTP è¯·æ±‚æŠ¥æ–‡è§£æã€HTTP å“åº”æŠ¥æ–‡æ„å»ºã€ä¿¡æ¯ä¼ é€’** çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚

å…¶ä¸»è¦å±æ€§æœ‰ï¼š

|å±æ€§|ç±»å‹|è¯´æ˜|
|---|---|---|
|**`ctx.app`**|`pywss.App`|æ ¹appå¯¹è±¡|
|**`ctx.fd`**|`socket.socket`|sockå¥æŸ„ï¼Œä¸€èˆ¬ç”¨äºå†™æ“ä½œ|
|**`ctx.rfd`**|`socket.makefile`|sockå¥æŸ„ï¼Œä¸€èˆ¬ç”¨äºè¯»æ“ä½œ|
|**`ctx.address`**|`tuple`|è¯·æ±‚åœ°å€ä¿¡æ¯|
|**`ctx.method`**|`str`|HTTPè¯·æ±‚æ–¹æ³•ï¼Œç”± GET/POST/PUT/DELETE/HEAD/PATCH/OPTIONS ç»„æˆ|
|**`ctx.version`**|`str`|HTTPåè®®ç‰ˆæœ¬å·ï¼Œå‚è€ƒï¼š`HTTP/1.1`|
|**`ctx.url`**|`str`|HTTPè¯·æ±‚Urlåœ°å€ï¼Œæ³¨æ„æ˜¯**åŒ…å«è¯·æ±‚å‚æ•°åœ¨å†…**çš„å…¨é‡åœ°å€ã€‚å‚è€ƒï¼š`/api/v1/query?key=value`|
|**`ctx.url_params`**|`dict`|HTTPè¯·æ±‚å‚æ•°ï¼Œæ˜¯åŸºäº`ctx.url`è§£æçš„ç»“æœã€‚ä¸¾ä¾‹è¯´æ˜ï¼šå¯¹äº`/api/v1/query?key=value`åœ°å€ï¼Œ`ctx.url_params`ç­‰äº**`{"key": "value"}`**|
|**`ctx.route`**|`str`|HTTPè¯·æ±‚Routeè·¯ç”±ï¼Œæ³¨æ„æ˜¯**ä¸åŒ…å«è¯·æ±‚å‚æ•°åœ¨å†…**çš„è·¯ç”±ï¼Œå‚è€ƒï¼š`/api/v1/query`|
|**`ctx.route_params`**|`dict`|ç”¨äºå­˜å‚¨[å±€éƒ¨åŒ¹é…](#ç‰¹æ®Šè·¯ç”±åŒ¹é…æœºåˆ¶)ä¸‹çš„è·¯å¾„å‚æ•°ï¼Œä¸¾ä¾‹è¯´æ˜ï¼šå¯¹äº`/api/v1/{name}/{age}`è·¯ç”±ï¼Œ`ctx.route_params`ç­‰äº**`{"name": "xx", "age": "xx"}`**|
|**`ctx.headers`**|`dict`|HTTPè¯·æ±‚å¤´|
|**`ctx.cookies`**|`dict`|HTTPè¯·æ±‚Cookieï¼Œæ˜¯åŸºäº`ctx.headers["Cookie"]`è§£æçš„ç»“æœ|
|**`ctx.content_length`**|`int`|HTTPè¯·æ±‚Bodyå¤§å°ï¼Œæ˜¯åŸºäº`ctx.headers["Content-Length"]`è§£æçš„ç»“æœ|
|**`ctx.content`**|`byte`|HTTPè¯·æ±‚Bodyã€‚å¯¹äºéœ€è¦è·å–åŸç”Ÿè¯·æ±‚åœºæ™¯ï¼Œæ¨èä½¿ç”¨`ctx.body()`|
|**`ctx.data`**|`pywss.Data`|åŸºäºå­—å…¸å®ç°ï¼Œç”¨äºContextä¸Šä¸‹æ–‡ä¿¡æ¯ä¼ é€’ã€‚ä½¿ç”¨æ–¹å¼å‚è€ƒ `ctx.data.key = value`|
|**`ctx.body()`**|`func`|è·å–åŸå§‹è¯·æ±‚Body|
|**`ctx.json()`**|`func`|è§£æJSONè¯·æ±‚ï¼Œä»¥JSONå½¢å¼è¿”å›è¯·æ±‚Body|
|**`ctx.form()`**|`func`|è§£æè¡¨å•è¯·æ±‚ï¼Œå¹¶ä»¥JSONå½¢å¼è¿”å›è¯·æ±‚Body|
|**`ctx.set_status_code()`**|`func`|æŒ‡å®šHTTPå“åº”æŠ¥æ–‡çŠ¶æ€ç |
|**`ctx.set_header()`**|`func`|æŒ‡å®šHTTPå“åº”å¤´|
|**`ctx.set_content_type()`**|`func`|æŒ‡å®šHTTPå“åº”ç±»å‹|
|**`ctx.set_cookie()`**|`func`|æŒ‡å®šHTTPå“åº”Cookie|
|**`ctx.write()`**|`func`|æŒ‡å®šHTTPå“åº”ä½“|
|**`ctx.flush()`**|`func`|ä¸€èˆ¬ä¸éœ€è¦è‡ªå·±è°ƒç”¨ï¼Œåœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹æœ‰ç”¨ï¼Œæ¯”å¦‚æå‰ç»“æŸè¯·æ±‚|

## ä¼˜é›…çš„ä½¿ç”¨ **ctx.next**
